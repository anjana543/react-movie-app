{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nexport default function useFetch(path, pageNumber) {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  const url = path === null || path === void 0 ? void 0 : path[pageNumber];\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    axios.get(url, {\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      var _res$data;\n\n      setData((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.page);\n      setBooks(prevBooks => {\n        return [...prevBooks, ...res.data.docs.map(b => b.title)];\n      });\n      setHasMore(res.data.page.length > 0);\n      setLoading(false);\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      setLoading(false);\n      setError(true);\n    });\n    return () => cancel();\n  }, [path, pageNumber]);\n  return {\n    loading,\n    error,\n    data,\n    hasMore\n  };\n}\n\n_s(useFetch, \"nj7ayNh9j5wpHI1daP3exK3poo4=\");","map":{"version":3,"sources":["C:/Projects/dg-react-test/src/hooks/useFetch.jsx"],"names":["useEffect","useState","axios","useFetch","path","pageNumber","loading","setLoading","error","setError","data","setData","hasMore","setHasMore","url","cancel","get","cancelToken","CancelToken","c","then","res","page","setBooks","prevBooks","docs","map","b","title","length","catch","e","isCancel"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,QAAT,CAAkBC,IAAlB,EAAwBC,UAAxB,EAAoC;AAAA;;AACjD,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAMa,GAAG,GAAGV,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAGC,UAAH,CAAhB;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAE,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,QAAIM,MAAJ;AACAb,IAAAA,KAAK,CACFc,GADH,CACOF,GADP,EACY;AACRG,MAAAA,WAAW,EAAE,IAAIf,KAAK,CAACgB,WAAV,CAAuBC,CAAD,IAAQJ,MAAM,GAAGI,CAAvC;AADL,KADZ,EAIGC,IAJH,CAISC,GAAD,IAAS;AAAA;;AACbV,MAAAA,OAAO,cAACU,GAAG,CAACX,IAAL,8CAAC,UAAUY,IAAX,CAAP;AACAC,MAAAA,QAAQ,CAAEC,SAAD,IAAe;AACtB,eAAO,CAAC,GAAGA,SAAJ,EAAe,GAAGH,GAAG,CAACX,IAAJ,CAASe,IAAT,CAAcC,GAAd,CAAmBC,CAAD,IAAOA,CAAC,CAACC,KAA3B,CAAlB,CAAP;AACD,OAFO,CAAR;AAGAf,MAAAA,UAAU,CAACQ,GAAG,CAACX,IAAJ,CAASY,IAAT,CAAcO,MAAd,GAAuB,CAAxB,CAAV;AACAtB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAXH,EAYGuB,KAZH,CAYUC,CAAD,IAAO;AACZ,UAAI7B,KAAK,CAAC8B,QAAN,CAAeD,CAAf,CAAJ,EAAuB;AACvBxB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,KAhBH;AAiBA,WAAO,MAAMM,MAAM,EAAnB;AACD,GAtBQ,EAsBN,CAACX,IAAD,EAAOC,UAAP,CAtBM,CAAT;AAwBA,SAAO;AAAEC,IAAAA,OAAF;AAAWE,IAAAA,KAAX;AAAkBE,IAAAA,IAAlB;AAAwBE,IAAAA;AAAxB,GAAP;AACD;;GAhCuBT,Q","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function useFetch(path, pageNumber) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [data, setData] = useState([]);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const url = path?.[pageNumber];\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n    let cancel;\r\n    axios\r\n      .get(url, {\r\n        cancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n      })\r\n      .then((res) => {\r\n        setData(res.data?.page);\r\n        setBooks((prevBooks) => {\r\n          return [...prevBooks, ...res.data.docs.map((b) => b.title)];\r\n        });\r\n        setHasMore(res.data.page.length > 0);\r\n        setLoading(false);\r\n      })\r\n      .catch((e) => {\r\n        if (axios.isCancel(e)) return;\r\n        setLoading(false);\r\n        setError(true);\r\n      });\r\n    return () => cancel();\r\n  }, [path, pageNumber]);\r\n\r\n  return { loading, error, data, hasMore };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}