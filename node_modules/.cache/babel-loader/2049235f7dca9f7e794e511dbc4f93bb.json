{"ast":null,"code":"import _slicedToArray from\"C:\\\\Projects\\\\dg-react-test\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{API}from\"../utils/constant\";/**\r\n * @description - useFetch Hook - GET Api call\r\n * @param {string} path\r\n * @param {Number} pageNumber\r\n * @returns {useFetchObject}\r\n */export default function useFetch(path,pageNumber){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),hasMore=_useState8[0],setHasMore=_useState8[1];var url=path===null||path===void 0?void 0:path[pageNumber];useEffect(function(){setLoading(true);setError(false);var cancel;axios.get(url,{headers:{\"secret-key\":API.SECRET_KEY},cancelToken:new axios.CancelToken(function(c){return cancel=c;})}).then(function(res){var _res$data,_res$data2;setData(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.page);setHasMore(res!==null&&res!==void 0&&(_res$data2=res.data)!==null&&_res$data2!==void 0&&_res$data2.page?res.data.page[\"page-size-requested\"]===res.data.page[\"page-size-returned\"]:false);setLoading(false);}).catch(function(e){if(axios.isCancel(e))return;setLoading(false);setError(true);});return function(){return cancel();};},[path,pageNumber]);return{loading:loading,error:error,data:data,hasMore:hasMore};}/**\r\n * @typedef {object} useFetchObject\r\n * @property {boolean} loading\r\n * @property {Error} error\r\n * @property {Response} data\r\n * @property {boolean} hasMore\r\n */","map":{"version":3,"sources":["C:/Projects/dg-react-test/src/hooks/useFetch.jsx"],"names":["useEffect","useState","axios","API","useFetch","path","pageNumber","loading","setLoading","error","setError","data","setData","hasMore","setHasMore","url","cancel","get","headers","SECRET_KEY","cancelToken","CancelToken","c","then","res","page","catch","e","isCancel"],"mappings":"uHAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,mBAApB,CAEA;AACA;AACA;AACA;AACA;AACA,GACA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,IAAlB,CAAwBC,UAAxB,CAAoC,CACjD,cAA8BL,QAAQ,CAAC,IAAD,CAAtC,wCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAA0BP,QAAQ,CAAC,KAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eACA,eAAwBT,QAAQ,CAAC,EAAD,CAAhC,yCAAOU,IAAP,eAAaC,OAAb,eACA,eAA8BX,QAAQ,CAAC,KAAD,CAAtC,yCAAOY,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,GAAG,CAAGV,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAGC,UAAH,CAAhB,CAEAN,SAAS,CAAC,UAAM,CACdQ,UAAU,CAAC,IAAD,CAAV,CACAE,QAAQ,CAAC,KAAD,CAAR,CACA,GAAIM,CAAAA,MAAJ,CACAd,KAAK,CACFe,GADH,CACOF,GADP,CACY,CACRG,OAAO,CAAE,CACP,aAAcf,GAAG,CAACgB,UADX,CADD,CAIRC,WAAW,CAAE,GAAIlB,CAAAA,KAAK,CAACmB,WAAV,CAAsB,SAACC,CAAD,QAAQN,CAAAA,MAAM,CAAGM,CAAjB,EAAtB,CAJL,CADZ,EAOGC,IAPH,CAOQ,SAACC,GAAD,CAAS,0BACbZ,OAAO,CAACY,GAAD,SAACA,GAAD,4BAACA,GAAG,CAAEb,IAAN,oCAAC,UAAWc,IAAZ,CAAP,CACAX,UAAU,CACRU,GAAG,OAAH,EAAAA,GAAG,SAAH,cAAAA,GAAG,CAAEb,IAAL,0CAAWc,IAAX,CACID,GAAG,CAACb,IAAJ,CAASc,IAAT,CAAc,qBAAd,IACED,GAAG,CAACb,IAAJ,CAASc,IAAT,CAAc,oBAAd,CAFN,CAGI,KAJI,CAAV,CAMAjB,UAAU,CAAC,KAAD,CAAV,CACD,CAhBH,EAiBGkB,KAjBH,CAiBS,SAACC,CAAD,CAAO,CACZ,GAAIzB,KAAK,CAAC0B,QAAN,CAAeD,CAAf,CAAJ,CAAuB,OACvBnB,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAAC,IAAD,CAAR,CACD,CArBH,EAsBA,MAAO,kBAAMM,CAAAA,MAAM,EAAZ,EAAP,CACD,CA3BQ,CA2BN,CAACX,IAAD,CAAOC,UAAP,CA3BM,CAAT,CA6BA,MAAO,CAAEC,OAAO,CAAPA,OAAF,CAAWE,KAAK,CAALA,KAAX,CAAkBE,IAAI,CAAJA,IAAlB,CAAwBE,OAAO,CAAPA,OAAxB,CAAP,CACD,CAED;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { API } from \"../utils/constant\";\r\n\r\n/**\r\n * @description - useFetch Hook - GET Api call\r\n * @param {string} path\r\n * @param {Number} pageNumber\r\n * @returns {useFetchObject}\r\n */\r\nexport default function useFetch(path, pageNumber) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const url = path?.[pageNumber];\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n    let cancel;\r\n    axios\r\n      .get(url, {\r\n        headers: {\r\n          \"secret-key\": API.SECRET_KEY,\r\n        },\r\n        cancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n      })\r\n      .then((res) => {\r\n        setData(res?.data?.page);\r\n        setHasMore(\r\n          res?.data?.page\r\n            ? res.data.page[\"page-size-requested\"] ===\r\n                res.data.page[\"page-size-returned\"]\r\n            : false\r\n        );\r\n        setLoading(false);\r\n      })\r\n      .catch((e) => {\r\n        if (axios.isCancel(e)) return;\r\n        setLoading(false);\r\n        setError(true);\r\n      });\r\n    return () => cancel();\r\n  }, [path, pageNumber]);\r\n\r\n  return { loading, error, data, hasMore };\r\n}\r\n\r\n/**\r\n * @typedef {object} useFetchObject\r\n * @property {boolean} loading\r\n * @property {Error} error\r\n * @property {Response} data\r\n * @property {boolean} hasMore\r\n */\r\n"]},"metadata":{},"sourceType":"module"}